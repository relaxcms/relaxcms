<div class="portlet light $mid" id="$mid">
    <div class="portlet-title">
        <div class="caption caption-md font-primary-sunglo">
                $title
        </div>

        <div class="actions">
            
            <div class="btn-group">
              <button class="btn default more">
                <i class="fa fa-more"></i>
              </button>
            </div>
            
            
            <div class="btn-group">
              <button class="btn switchview" data-view="$view">
                <i class="fa $active_switchview_class"></i>
              </button>
            </div>

        </div>
    </div>
<div class="portlet-body tileview-large $active_large">
<!--# for ($i=0; $i<$rows; $i++) { #-->
<div class="row tv$col_width">
	<!--# for ($j=0; $j<$cols; $j++) { $idx = $i*$cols+$j; if ($idx >= $nr)break; $v=$_udb[$idx]; #-->
	<div class="col-md-$col_width col-sm-$col_width col-xs-12">
						<!-- BEGIN WIDGET THUMB -->
	                      <div class="widget-thumb widget-bg-color-gray text-uppercase margin-bottom-20 ">
	                          <div class="widget-thumb-wrap">
	                          	<a href="$v[url]" class="videoplay" data-playurl='$v[playurl]'>
                                <!--# if ($v['photo']) { #-->
	                                <img src="$v[photo]"/>
                                <!--# } else { #-->
                                  <i class="widget-thumb-icon bg-red fa fa-film ">
                                    </i>
                                <!--# }#-->
	                            </a>
	                            <div class="clearfix"></div>
	                            <a href="$v[url]" title="$v[title]" target="_blank" >
	                                <span class="widget-thumb-title">$v[title]</span>
	                            </a>
                              $v[extinfo]
	                          </div>
						</div>
						<!-- END WIDGET THUMB -->
					</div>
	<!--# } #-->				
</div> 
<!--# } #-->
</div>

<!-- listimg -->
<div class="portlet-body tileview-listimg $active_listimg">
    <div class="mt-element-list">
        <div class="mt-list-container list-news ext-1">
            <ul>
            <!--# foreach ($udb as $key=>$v){ #-->
                <li class="mt-list-item">
			        <div class="list-icon-container">
			            <a href="javascript:;">
			                <i class="fa fa-angle-right"></i>
			            </a>
			        </div>
			        <div class="list-thumb">
			            <a href="javascript:;">
			                <img alt="" src="$v[photo]"/>
			           </a>
			        </div>
			        <div class="list-datetime uppercase font-gray pull-right">$v[timelong]</div>							
			        <div class="list-item-content">
			            <h3 class="uppercase title">
			                <a href="$v[url]">$v[name]</a>
			            </h3>
			            <p></p>
			        </div>
			        <div class="clearfix"></div>
			    </li>
			    <div class="clearfix"></div>
			    <!--#}#-->			
            </ul>
        </div>
    </div>
</div>

<!-- detail -->
<div class="portlet-body tileview-detail $active_detail">
    <div class="table-scrollable table-scrollable-borderless">
        <table class="table table-hover table-light">
            <tbody>
            <!--# $i = 0; foreach ($udb as $key=>$v) { $i++; #-->
                <tr>
                    <td><a href='$_basename/content/$v[id]'>$v[name]</a></td>
                    <td>$v[time]</td>
                </tr>
            <!--# } #-->            
            </tbody>
        </table>
    </div>                                            
</div>

</div>
<script type="text/javascript">
jQuery(document).ready(function() {
    var views = $enable_view_list;
            
    $('#$mid .switchview').on('click', function(e) {  
        var view = $(this).attr('data-view');
        
        var current_index = 0;
        
        for (i=0; i<views.length; i++) {
            if (view == views[i].name) {
                current_index = i;
                break;
            }
        } 
        var next_view = (current_index +1)%views.length;
        if (next_view != current_index) {
            $(this).attr('data-view', views[next_view].name);
            $(this).find('i').removeClass(views[current_index].className);
            $(this).find('i').addClass(views[next_view].className);
            
            for (i=0; i<views.length; i++) {           
                if (i != next_view) {
                    $('#$mid .tileview-'+views[i].name).addClass('hidden');
                } else {
                    $('#$mid .tileview-'+views[i].name).removeClass('hidden');
                }
            }
        }        
    });
});
</script>