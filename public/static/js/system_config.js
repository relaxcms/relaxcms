!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=80)}({0:function(e,t,a){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),o=[];function s(e){for(var t=-1,a=0;a<o.length;a++)if(o[a].identifier===e){t=a;break}return t}function l(e,t){for(var a={},n=[],r=0;r<e.length;r++){var i=e[r],l=t.base?i[0]+t.base:i[0],d=a[l]||0,c="".concat(l," ").concat(d);a[l]=d+1;var u=s(c),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(o[u].references++,o[u].updater(f)):o.push({identifier:c,updater:v(f,t),references:1}),n.push(c)}return n}function d(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=a.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,a,n){var r=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var i=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function p(e,t,a){var n=a.css,r=a.media,i=a.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var h=null,m=0;function v(e,t){var a,n,r;if(t.singleton){var i=m++;a=h||(h=d(t)),n=f.bind(null,a,i,!1),r=f.bind(null,a,i,!0)}else a=d(t),n=p.bind(null,a,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var a=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var r=s(a[n]);o[r].references--}for(var i=l(e,t),d=0;d<a.length;d++){var c=s(a[d]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}a=i}}}},80:function(e,t,a){a(81),a(83),a(84),a(86)},81:function(e,t,a){var n=a(0),r=a(82);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i);e.exports=r.locals||{}},82:function(e,t,a){},83:function(e,t){var a,n,r,i,o;a=jQuery,n=a("#system_config_base_form"),r="",i=function(){var e=a("#param_layout",n).val();a("body").removeClass("page-boxed").removeClass("page-footer-fixed").removeClass("page-sidebar-fixed").removeClass("page-sidebar-reversed"),a(".page-header > .page-header-inner").removeClass("container"),1===a(".page-container").parent(".container").size()&&a(".page-container").insertAfter("body > .clearfix"),1===a(".page-footer > .container").size()?a(".page-footer").html(a(".page-footer > .container").html()):1===a(".page-footer").parent(".container").size()&&(a(".page-footer").insertAfter(".page-container"),a(".scroll-to-top").insertAfter(".page-footer")),a(".top-menu > .navbar-nav > li.dropdown").removeClass("dropdown-dark"),a("body > .container").remove(),"boxed"===e&&(a("body").addClass("page-boxed"),a(".page-header > .page-header-inner").addClass("container"),a("body > .clearfix").after('<div class="container"></div>'),a(".page-container").appendTo("body > .container"),a(".page-footer").appendTo("body > .container")),r!=e&&App.runResizeHandlers(),r=e},o={initActions:function(){a("#param_layout",n).change(i);var e=a("#param_theme").val();e||(e="default"),a("ul > li",n).removeClass("current"),a(".theme-colors ."+e).addClass("current"),a(".theme-colors > li",n).click((function(){!function(e){a("#css_admin_theme").attr("href",G._dstroot+"/themes/system/css/"+e+".min.css"),a("#param_theme").val(e)}(a(this).attr("data-style")),a("ul > li",n).removeClass("current"),a(this).addClass("current")})),this.initFoFormBase()},initFoFormBase:function(){a("#system_config_base_form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,rules:{name:{required:!0,email:!0},password:{required:!0},remember:{required:!1}},messages:{name:{required:"Username is required."},password:{required:"Password is required."}},invalidHandler:function(e,t){a(".alert-danger",a("#system_config_base_form")).show()},highlight:function(e){a(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,t){e.insertAfter(t)},submitHandler:function(e){!function(e){var t=a(e).serializeArray();rui.post(e.action,t).then((function(e){0==e.status?(rui.showTSuccess("操作成功"),rui.refresh(1)):rui.showTError("操作失败:"+e.status)}))}(e)}})},initUploadBG:function(){},init:function(){this.initActions(),this.initUploadBG(),a("#systemlogo").fileupload({disableImageResize:!1,autoUpload:!1,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),maxFileSize:5e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i})}},a(document).ready((function(){o.init()}))},84:function(e,t,a){var n=a(0),r=a(85);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i);e.exports=r.locals||{}},85:function(e,t,a){},86:function(e,t){var a,n;a=jQuery,(n=function(e){this.initialize(e)}).prototype={el:null,id:"_",url:window.location.href,mid:0,multiple:!0,downloadAction:!0,settingAction:!0,deleteAction:!0,detail:0,width:240,height:180,maxnum:1024,ctype:"",name:"_",rows:[],initialize:function(e){var t=this;t.el=e;var n="";void 0!==e.attr("data-url")&&(t.url=e.attr("data-url")),void 0!==e.attr("data-mid")&&(t.mid=parseInt(e.attr("data-mid"))),void 0!==e.attr("data-single")&&(t.multiple=!1),void 0!==e.attr("data-nosetting")&&(t.settingAction=!1),void 0!==e.attr("data-nodelete")&&(t.deleteAction=!1),void 0!==e.attr("data-maxnum")&&(t.maxnum=parseInt(e.attr("data-maxnum"))),void 0!==e.attr("data-ctype")&&(t.ctype=e.attr("data-ctype")),void 0!==e.attr("data-width")&&(t.width=parseInt(e.attr("data-width"))),void 0!==e.attr("data-height")&&(t.height=parseInt(e.attr("data-height"))),void 0!==e.attr("data-id")&&(n=e.attr("data-id")),void 0!==e.attr("data-name")&&(t.name=e.attr("data-name")),void 0!==e.attr("data-detail")&&(t.detail=parseInt(e.attr("data-detail"))),t.initNew(),t.initGallery(),n||(n="_"+t.width),t.id=n,t.rows=[],a.ajax({url:t.url+"/selected",dataType:"json",data:{mid:t.mid}}).always((function(){a(this).removeClass("fileselector-processing")})).done((function(e){t.loadData(e.data)}))},initNew:function(){var e=this,t="<div id=new"+e.id+' class="thumbnail" style="width:'+e.width+"px; height:"+e.height+'px;"> <a href="#" class="fs-select"> <i class="fa fa-plus select" style="line-height:'+e.height+'px;"> </i> </a></div>',n=a(t);e.$new=n,e.el.append(n),a(".fs-select",n).on("click",(function(t){t.preventDefault(),a(this);var n=e.url;top.layer.open({type:2,title:"选择",shadeClose:!1,shade:.2,maxmin:!0,shift:10,area:["55%","70%"],content:n,btn:["确定","关闭"],yes:function(t,n){var r=top.window["layui-layer-iframe"+t].rows,o=[];for(i=0;i<r.length&&i<e.maxnum;i++)row=r[i],_.isUndefined(row._type)||(row.type=row._type),e.rows.push(row),o.push(row.id);a("#param_"+e.name).val(o.toString()).change(),e.reload(),top.layer.close(t)}})}))},initGallery:function(){var e=this,t="blueimp-gallery_"+e.id+Math.floor(100*Math.random()),n='<div id="'+t+'" class="blueimp-gallery blueimp-gallery-controls" data-filter=":even"><div class="slides"> </div><h3 class="title"></h3><a class="prev"> ‹ </a><a class="next"> › </a><a class="close white"> </a><a class="play-pause"> </a><ol class="indicator"> </ol></div> ';e.el.append(a(n)),e.gid=t},getItem:function(e){var t;for(t=0;t<this.rows.length;t++)if(this.rows[t].id==e)return!0;return!1},loadData:function(e){var t,a=this;for(t=0;t<e.length;t++)a.getItem(e[t].id)||a.rows.push(e[t]);a.reload()},reload:function(){var e=this;for(i=0;i<e.rows.length;i++)if(!e.rows[i].loaded){e.rows[i].loaded=!0;var t=e.rows[i],n=1==t.type||4==t.type?"gallery":"download",r='<div class="thumbnail" style="width:'+e.width+"px; height:"+e.height+'px;"><a href="'+t.url+'" class="'+n+'"><img src="'+t.lpreviewUrl+'"/></a><div class="actionbar">';e.downloadAction&&(r+='<a href="'+t.downloadUrl+'" target="_blank" class="btn btn-xs  fs-download" data-id="'+t.id+'"><i class="fa fa-download"> </i></a>'),e.settingAction&&(r+='<button class="btn btn-xs  fs-setting" data-id="'+t.f2m_id+'"><i class="fa fa-cog"> </i></button>'),e.deleteAction&&(r+='<button class="btn btn-xs red fs-delete"><i class="fa fa-trash-o"> </i></button>'),r+='</div><input type="hidden" name="params['+e.name+'][]" value="'+t.id+'"></div>';var o=a(r);e.$new.before(o),a(".gallery",o).on("click",(function(t){t.preventDefault();var n=a(this).attr("data-id");e.showGallery(n)})),a(".fs-delete",o).on("click",(function(t){t.preventDefault(),a(this).closest(".thumbnail").remove(),e.rows.pop(),e.rows.length<e.maxnum&&e.$new.show()})),a(".fs-setting",o).on("click",(function(t){t.preventDefault();var n=a(this).attr("data-id"),r=e.url+"/setgallery?dlg=1&id="+n;layer.open({type:2,title:"设置",shadeClose:!0,shade:.2,maxmin:!0,shift:10,area:["70%","65%"],content:r})}))}(i>=e.maxnum||1==e.detail)&&e.$new.hide()},showGallery:function(e){var t=this,a=[],n=0,r=0;for(i=0;i<t.rows.length;i++){var o=t.rows[i],s=(o.url,{title:o.title,href:o.url,type:o.mimetype,poster:o.lpreviewUrl});a.push(s),e==o.id&&(r=n),n++}var l="#"+t.gid;blueimp.Gallery(a,{container:l,carousel:!0,index:r})}},a(document).ready((function(){a(".fileselector").each((function(){new n(a(this))}))}))}});